{% extends "base.html" %}
{% load static %}

{% block title %}Online Classes - Creative Education Foundation{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'pages/liveClasses//online_class.css' %}">
{% endblock %}

{% comment %} {% block extra_js %}
<script src="{% static 'js/home.js' %}"></script>
{% endblock %} {% endcomment %}


{% block content %}
<!-- Live Classes Section -->
<div class="live-classes-grid">
    {% for fc in featured_courses %}
        <a href="{% url 'online_class_extra' fc.id %}" class="live-class-card">
        <div class="live-class-image">
            <img src="{{ fc.image.url|default_if_none:'/static/img/placeholder.png' }}" alt="{{ fc.title }}">
        </div>
        <div class="live-class-content">
            {#  average rating  #}
            {% with avg=fc.avg_rating|floatformat:0|add:0 %}   {# integer 4 #}
                {% if avg %}
                    <div class="rating-line">
                    <span class="stars">
                        {% for i in "12345" %}
                        {% if forloop.counter <= avg %}   {# 1 <= 4 → True #}
                            <i class="star filled">★</i>
                        {% else %}
                            <i class="star">☆</i>
                        {% endif %}
                        {% endfor %}
                    </span>
                    <span class="avg-num">{{ avg|floatformat:1 }}</span>
                    </div>
                {% endif %}
            {% endwith %}

            <h3 class="live-class-title">{{ fc.title }}</h3>
            <p class="live-class-price">Rs. {{ fc.get_discounted_price|floatformat:0 }}</p>

            <div class="live-class-schedule">
            <div class="schedule-row">
                <span class="schedule-label">Next</span>
                <span class="schedule-time">
                {% if fc.get_next_class_datetime %}
                    {{ fc.get_next_class_datetime|date:"h:i A" }}
                    {% if fc.end_time %}– {{ fc.end_time|time:"h:i A" }}{% endif %}
                {% else %}
                    TBA
                {% endif %}
                </span>
            </div>
            <div class="schedule-row">
                <span class="schedule-label">Days</span>
                <span class="schedule-time">{{ fc.schedule_days|join:", "|default:"TBA"|title }}</span>
            </div>
            </div>
        </div>
        </a>
    {% empty %}
        <p class="no-courses">No live courses at the moment.</p>
    {% endfor %}
</div>
{% endblock %}