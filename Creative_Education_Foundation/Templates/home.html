{% extends 'base.html' %}
{% load static %}

{% block title %}Home - Creative Education Foundation{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'pages/home.css' %}">
{% endblock %}


{% block content %}
<section class="hero-section">
    <div class="hero-container">
        <!-- Left side - Logo -->
        <div class="hero-logo">
            <div class="logo-card">
                <img src="{% static 'img/logo.png' %}" alt="Creative Education Foundation">
            </div>
        </div>

        <!-- Right side - Content -->
        <div class="hero-content">
            <div class="content-card">
                <p class="hero-subtitle">Bringing Quality Education to Your Fingertips</p>
                <h1 class="hero-title">Join with us to Achieve More with Creative Learning</h1>
                <div class="hero-buttons">
                    <a href="{% url 'online_classes' %}" class="btn-explore">Explore Courses</a>
                    <a href="{% url 'online_classes' %}" class="btn-learn">Learn More</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Our Courses Section -->
<section class="courses-section">
    <div class="section-container">
        <div class="section-header">
            <h2>Our Courses</h2>
        </div>

        <div class="courses-grid">
            <div class="course-card">
                <div class="course-image">
                    <img src="{% static 'img/logo.png' %}" alt="Classes">
                </div>
                <h3 class="course-title">Classes</h3>
            </div>
            <!-- Add more course cards as needed -->
        </div>
    </div>
    <a href="{% url 'courses' %}" class="view-more">
                View more 
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="m12 16 4-4-4-4M8 12h8"/>
                </svg>
            </a>
</section>


<!-- Live Classes Section -->
<section class="live-classes-section">
    <div class="section-container">
        <div class="section-header"><h2>Live Classes</h2></div>

        <div class="live-classes-grid">
        {% for fc in featured_courses %}
            <a href="{% url 'online_class_extra' fc.id %}" class="live-class-card">
            <div class="live-class-image">
                <img src="{{ fc.image.url|default_if_none:'/static/img/placeholder.png' }}" alt="{{ fc.title }}">
            </div>
            <div class="live-class-content">
                {#  dynamic stars  #}
                {% with avg=fc.avg_rating|floatformat:0|add:0 %}
                {% if avg %}
                    <div class="rating-line">
                    <span class="stars">
                        {% for i in "12345" %}
                        {% if forloop.counter <= avg %}<i class="star filled">★</i>{% else %}<i class="star">☆</i>{% endif %}
                        {% endfor %}
                    </span>
                    <span class="avg-num">{{ avg|floatformat:1 }}</span>
                    </div>
                {% endif %}
                {% endwith %}

                <h3 class="live-class-title">{{ fc.title }}</h3>
                <p class="live-class-price">Rs. {{ fc.get_discounted_price|floatformat:0 }}</p>

                <div class="live-class-schedule">
                <div class="schedule-row">
                    <span class="schedule-label">Next</span>
                    <span class="schedule-time">
                    {% if fc.get_next_class_datetime %}
                        {{ fc.get_next_class_datetime|date:"h:i A" }}
                        {% if fc.end_time %}– {{ fc.end_time|time:"h:i A" }}{% endif %}
                    {% else %}TBA{% endif %}
                    </span>
                </div>
                <div class="schedule-row">
                    <span class="schedule-label">Days</span>
                    <span class="schedule-time">{{ fc.schedule_days|join:", "|default:"TBA"|title }}</span>
                </div>
                </div>
            </div>
            </a>
        {% empty %}
            <p class="no-courses">No live courses at the moment.</p>
        {% endfor %}
        </div>
    </div>
</section>

<!-- Mock Test Section -->
<section class="courses-section">
    <div class="section-container">
        <div class="section-header">
            <h2>Mock Test</h2>
            
        </div>

        <div class="courses-grid">
            <div class="course-card">
                <div class="course-image">
                    <img src="{% static 'img/logo.png' %}" alt="Classes">
                </div>
                <h3 class="course-title">Mock Test</h3>
            </div>
            <!-- Add more course cards as needed -->
        </div>
    </div>
    <a href="{% url 'mock_test' %}" class="view-more">
                View more 
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="m12 16 4-4-4-4M8 12h8"/>
                </svg>
            </a>
</section>




<!-- Ask a Question Section -->
<!-- Ask a Question Section -->
<section class="question-section">
    <div class="question-container">
        <div class="question-header">
        <h2>Ask a Question</h2>
        <p>Have a question? Feel free to ask us anything.</p>
        </div>

        {% if user.is_authenticated %}
        <form class="question-form" action="{% url 'submit_question' %}" method="post">
            {% csrf_token %}
            <div class="form-group">
            <label for="name">Your Name</label>
            <input type="text" id="name" name="name" value="{{ user.get_full_name|default:user.username }}" required>
            </div>
            <div class="form-group">
            <label for="email">Your Email</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" required>
            </div>
            <div class="form-group">
            <label for="question">Your Question</label>
            <textarea id="question" name="question" rows="4" required></textarea>
            </div>
            <div class="form-group">
            <label for="suggestions">Suggestions</label>
            <textarea id="suggestions" name="suggestions" rows="4"></textarea>
            </div>
            <button type="submit" class="submit-btn">Submit</button>
        </form>
        {% else %}
        <div class="login-prompt">
            <p>Please <a href="{% url 'login' %}?next={{ request.path }}">log in</a> to ask a question.</p>
        </div>
        {% endif %}
    </div>
</section>



<!-- Frequently Asked Questions Section -->
<!-- FAQ Section -->
<section class="faq-section">
    <div class="faq-container">
        <div class="faq-header">
        <h2>Frequently Asked Questions</h2>
        <p class="faq-subtitle">
            {% comment %} Find answers to some of the most commonly asked questions about our e-learning system. {% endcomment %}
        </p>
        </div>

        <div class="faq-items">
        {% for faq in faqs %}
            <div class="faq-item">
            <button class="faq-question" type="button">
                <span>{{ faq.question }}</span>
                <span class="faq-icon">+</span>
            </button>
            <div class="faq-answer">
                <p>{{ faq.answer }}</p>
            </div>
            </div>
        {% empty %}
            <p class="no-faq">No FAQs yet.</p>
        {% endfor %}
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/home.js' %}"></script>
{% endblock %}